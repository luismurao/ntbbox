<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Function to find the cut-off threshold that optimizes the confusion matrix — confu_mat_optim • ntbbox</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Function to find the cut-off threshold that optimizes the confusion matrix — confu_mat_optim" />
<meta property="og:description" content="The function finds out which is the best cut-off threshold that
optimizes the confusion matrix based on any of the entries of the confusion matrix (a,b,c,d) or by Kappa, TSS, Prevalence, Specificity, Sensibility, Correct Classification Rate, Miss Classification Rate." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ntbbox</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.5.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="divider"></li>
    <li>
      <a href="../articles/index.html">More...</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/luismurao/ntbbox/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Function to find the cut-off threshold that optimizes the confusion matrix</h1>
    <small class="dont-index">Source: <a href='https://github.com/luismurao/ntbbox/blob/master/R/confu_mat_optim.R'><code>R/confu_mat_optim.R</code></a></small>
    <div class="hidden name"><code>confu_mat_optim.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function finds out which is the best cut-off threshold that
optimizes the confusion matrix based on any of the entries of the confusion matrix (a,b,c,d) or by Kappa, TSS, Prevalence, Specificity, Sensibility, Correct Classification Rate, Miss Classification Rate.</p>
    </div>

    <pre class="usage"><span class='fu'>confu_mat_optim</span>(
  <span class='no'>sdm_raster</span>,
  <span class='no'>valData</span>,
  <span class='no'>longitude</span>,
  <span class='no'>latitude</span>,
  <span class='no'>pres_abs</span>,
  <span class='kw'>optim_by</span> <span class='kw'>=</span> <span class='st'>"kappa"</span>,
  <span class='kw'>th_range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>),
  <span class='kw'>step</span> <span class='kw'>=</span> <span class='fl'>0.005</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>sdm_raster</th>
      <td><p>Continuos predicition raster.</p></td>
    </tr>
    <tr>
      <th>valData</th>
      <td><p>A data.frame or a matrix with validation data. The data must contain
longitude, latitude, and a column of presences (1) and absences (0).</p></td>
    </tr>
    <tr>
      <th>longitude</th>
      <td><p>Column name of the longitude data</p></td>
    </tr>
    <tr>
      <th>latitude</th>
      <td><p>Column name of the latitude data</p></td>
    </tr>
    <tr>
      <th>pres_abs</th>
      <td><p>Column name of presences and absences. The presences have to represented by
1 and the absences with 0.</p></td>
    </tr>
    <tr>
      <th>optim_by</th>
      <td><p>The optimation should be by any of the following options: kappa, tss, a, b, c, d, correct_class_rate, miss_cla_rate, posit_pre_pow, nega_pre_pow, comission_error,or by omission_error.</p></td>
    </tr>
    <tr>
      <th>th_range</th>
      <td><p>A vector with the minimum and max range of threshold values used in the searching process.</p></td>
    </tr>
    <tr>
      <th>step</th>
      <td><p>A numeric value representing the step size to be used in the searching process.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a data.frame with the values of the confusion matrix, kappa, tss, prevalence,
specificity, sensibility,correct classification rate (correct_class_rate), miss classification rate (miss_cla_rate), positive predictive power (posit_pre_pow), negative predictive power (nega_pre_pow), comission error (comission_error) and omission error (omission_error).</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Fielding, A.H. and Bell,J. (1997) A review of methods for the assessment of prediction errors in conservation presence/absence models. Environ. Conserv., 24, 38–49.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># Read a Ambystoma tigrinum model</span>
<span class='no'>sdm_model</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>raster</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/raster.html'>raster</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"extdata/rasters"</span>,
                                                  <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"ntbbox"</span>),
                                                  <span class='st'>"ambystoma_model.tif"</span>))
<span class='co'># Validation data with presences and absences</span>
<span class='no'>validation_data</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>utils</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"extdata/csv"</span>,
                                                     <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"ntbbox"</span>),
                                                     <span class='st'>"ambystoma_validation.csv"</span>))
<span class='co'># ----------------------------------------------------------------------------------</span>
<span class='co'># Optimization by Kappa metric</span>
<span class='co'># ----------------------------------------------------------------------------------</span>
<span class='no'>kappa_threshold</span> <span class='kw'>&lt;-</span> <span class='fu'>confu_mat_optim</span>(<span class='kw'>sdm_raster</span> <span class='kw'>=</span> <span class='no'>sdm_model</span>,
                                      <span class='kw'>valData</span> <span class='kw'>=</span> <span class='no'>validation_data</span>,
                                      <span class='kw'>longitude</span> <span class='kw'>=</span> <span class='st'>"longitude"</span>,
                                      <span class='kw'>latitude</span> <span class='kw'>=</span> <span class='st'>"latitude"</span>,
                                      <span class='kw'>pres_abs</span> <span class='kw'>=</span> <span class='st'>"presence_absence"</span>,
                                      <span class='kw'>optim_by</span> <span class='kw'>=</span> <span class='st'>"kappa"</span>,
                                      <span class='kw'>th_range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0.005</span>,<span class='fl'>0.5</span>),<span class='kw'>step</span> <span class='kw'>=</span> <span class='fl'>0.005</span>)

<span class='co'># Convert continuos model to binary by using Kappa optimization threshold</span>
<span class='no'>sdm_bin_kappa</span> <span class='kw'>&lt;-</span> <span class='no'>sdm_model</span> <span class='kw'>&gt;=</span> <span class='no'>kappa_threshold</span>$<span class='no'>threshold</span>[<span class='fl'>1</span>]
<span class='co'># Plot binary model</span>
<span class='kw pkg'>raster</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/plot.html'>plot</a></span>(<span class='no'>sdm_bin_kappa</span>)
<span class='co'># ----------------------------------------------------------------------------------</span>
<span class='co'># Optimization by Sensibility.</span>
<span class='co'># ----------------------------------------------------------------------------------</span>
<span class='no'>sensibility_threshold</span> <span class='kw'>&lt;-</span> <span class='fu'>confu_mat_optim</span>(<span class='kw'>sdm_raster</span> <span class='kw'>=</span> <span class='no'>sdm_model</span>,
                                         <span class='kw'>valData</span> <span class='kw'>=</span> <span class='no'>validation_data</span>,
                                         <span class='kw'>longitude</span> <span class='kw'>=</span> <span class='st'>"longitude"</span>,
                                         <span class='kw'>latitude</span> <span class='kw'>=</span> <span class='st'>"latitude"</span>,
                                         <span class='kw'>pres_abs</span> <span class='kw'>=</span> <span class='st'>"presence_absence"</span>,
                                         <span class='kw'>optim_by</span> <span class='kw'>=</span> <span class='st'>"sensibility"</span>,
                                         <span class='kw'>th_range</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0.005</span>,<span class='fl'>0.5</span>),<span class='kw'>step</span> <span class='kw'>=</span> <span class='fl'>0.005</span>)

<span class='co'># Convert the continuous model to binary by using Sensibility optimization threshold</span>
<span class='no'>sdm_bin_sensibility</span> <span class='kw'>&lt;-</span> <span class='no'>sdm_model</span> <span class='kw'>&gt;=</span> <span class='no'>sensibility_threshold</span>$<span class='no'>threshold</span>[<span class='fl'>1</span>]
<span class='co'># Plot binary model</span>
<span class='kw pkg'>raster</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/plot.html'>plot</a></span>(<span class='no'>sdm_bin_sensibility</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Luis Osorio-Olvera, Jorge Soberón, Vijay Barve, Narayani Barve, Manuel Falconi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'fbd8d79ed49f21fc9ca7b2cf601a3f5b',
    indexName: 'pkgdown',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


